#!/usr/bin/env bash
# Script that changes localhost to 127.0.0.2 and facebook.com to 8.8.8.8 in /etc/hosts

set -e

# Backup the original hosts file
sudo cp /etc/hosts /etc/hosts.bak

# Remove existing localhost and facebook.com entries
tmpfile="$(mktemp)"
grep -v -E 'localhost|facebook\.com' /etc/hosts > "$tmpfile"

# Add the required entries
{
    echo "127.0.0.2	localhost"
    echo "8.8.8.8	facebook.com"
} >> "$tmpfile"

# Overwrite the hosts file
sudo tee /etc/hosts < "$tmpfile" > /dev/null
rm "$tmpfile"
